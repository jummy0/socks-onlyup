[gd_scene load_steps=43 format=3 uid="uid://c4esikhsfgahq"]

[ext_resource type="FontFile" uid="uid://c25d003g01x4h" path="res://mario/Mario64.ttf" id="2_golva"]
[ext_resource type="Texture2D" uid="uid://d11gt4i4nrfra" path="res://mario/circle.png" id="3_0r5oq"]

[sub_resource type="GDScript" id="GDScript_wgra1"]
script/source = "extends Control

var pause_menu : MarioPauseMenu
var last_stick_value : Vector2 = Vector2.ZERO
var h_das_timer : int = 0
var h_last_das_trigger : int = 0
var v_das_timer : int = 0
var v_last_das_trigger : int = 0
const das : int = 200
const arr : int = 60


func close():
	pause_menu.hide_pause_menu = false
	SOGlobal.current_mario.hide_hud = false
	queue_free()

func toggle_transparency():
	if ProjectSettings.get_setting(\"display/window/size/transparent\") == false:
		ProjectSettings.set_setting(\"display/window/size/transparent\", true)
		ProjectSettings.set_setting(\"display/window/per_pixel_transparency/allowed\", true)
		ProjectSettings.set_setting(\"rendering/viewport/transparent_background\", true)
		get_window().transparent = true
		get_window().transparent_bg = true
		get_viewport().transparent_bg = true
	else:
		ProjectSettings.set_setting(\"display/window/size/transparent\", false)
		ProjectSettings.set_setting(\"display/window/per_pixel_transparency/allowed\", false)
		ProjectSettings.set_setting(\"rendering/viewport/transparent_background\", false)
		get_window().transparent = false
		get_window().transparent_bg = false
		get_viewport().transparent_bg = false
	ProjectSettings.save()
	SOGlobal.restart_desired = true

var selected_menu_option : int = 0
var selected_column : int = 0
@onready var label_container = $Control/LabelContainer
@onready var screen_res_label = $Control/LabelContainer/ScreenResLabel
@onready var transparency_label = $Control/LabelContainer/TransparencyLabel
@onready var fullscreen_label = $Control/LabelContainer/FullscreenLabel
@onready var border_label = $Control/LabelContainer/BorderLabel
@onready var fps_label = $Control/LabelContainer/FPSLabel
@onready var vsync_label = $Control/LabelContainer/VsyncLabel

@onready var controls_label_container = $Control/ControlsLabelContainer
@onready var raw_dot = $Control/ControlsLabelContainer/ColorRect/coord_disp_root/raw_dot
@onready var adj_dot = $Control/ControlsLabelContainer/ColorRect/coord_disp_root/adj_dot
@onready var rawcoord_x = $Control/ControlsLabelContainer/ColorRect/rawcoord_x
@onready var rawcoord_y = $Control/ControlsLabelContainer/ColorRect/rawcoord_y
@onready var adjcoord_x = $Control/ControlsLabelContainer/ColorRect/adjcoord_x
@onready var adjcoord_y = $Control/ControlsLabelContainer/ColorRect/adjcoord_y
@onready var inner_deadzone_label = $Control/ControlsLabelContainer/InnerDeadzoneLabel
@onready var outer_deadzone_label = $Control/ControlsLabelContainer/OuterDeadzoneLabel
@onready var horizontal_axis_label = $Control/ControlsLabelContainer/HorizontalAxisLabel

@onready var rebinding_label_container = $Control/ScrollContainer/RebindingLabelContainer
@onready var joy_left_label = $Control/ScrollContainer/RebindingLabelContainer/JoyLeftLabel
@onready var joy_right_label = $Control/ScrollContainer/RebindingLabelContainer/JoyRightLabel
@onready var joy_up_label = $Control/ScrollContainer/RebindingLabelContainer/JoyUpLabel
@onready var joy_down_label = $Control/ScrollContainer/RebindingLabelContainer/JoyDownLabel
@onready var c_up_label = $Control/ScrollContainer/RebindingLabelContainer/CUpLabel
@onready var c_down_label = $Control/ScrollContainer/RebindingLabelContainer/CDownLabel
@onready var c_left_label = $Control/ScrollContainer/RebindingLabelContainer/CLeftLabel
@onready var c_right_label = $Control/ScrollContainer/RebindingLabelContainer/CRightLabel
@onready var a_label = $Control/ScrollContainer/RebindingLabelContainer/ALabel
@onready var b_label = $Control/ScrollContainer/RebindingLabelContainer/BLabel
@onready var z_label = $Control/ScrollContainer/RebindingLabelContainer/ZLabel
@onready var cp_label = $Control/ScrollContainer/RebindingLabelContainer/CPLabel
@onready var cpl_label = $Control/ScrollContainer/RebindingLabelContainer/CPLLabel


var resolutions : Array[Vector2] = []
var picked_res : int = 0
func _ready():
	resolutions.append(Vector2(320, 240))
	resolutions.append(Vector2(640, 360))
	resolutions.append(Vector2(640, 480))
	resolutions.append(Vector2(1024, 576))
	resolutions.append(Vector2(1024, 768))
	resolutions.append(Vector2(1280, 720))
	resolutions.append(Vector2(1280, 960))
	resolutions.append(Vector2(1366, 768))
	resolutions.append(Vector2(1600, 900))
	resolutions.append(Vector2(1600, 1200))
	resolutions.append(Vector2(1920, 1080))
	SOGlobal.current_mario.hide_hud = true
	var closest_res_index : int = 0
	var current_closest_res_value : int = 0
	var current_smallest_diff : int = 0xFFFFFFFF
	var window_res_value : int = get_viewport().size.x * get_viewport().size.y
	for i in resolutions.size():
		var this_res_value : int = resolutions[i].x * resolutions[i].y
		var cur_diff : int = absi(this_res_value - window_res_value)
		if cur_diff < current_smallest_diff:
			current_smallest_diff = cur_diff
			current_closest_res_value = this_res_value
			closest_res_index = i
	
	picked_res = closest_res_index
	
	for label in label_container.get_children():
		label.label_settings.font_color = Color(0.5, 0.5, 0.5)
	for label in label_container.get_children():
		label.label_settings.font_color = Color(0.5, 0.5, 0.5)
	for label in label_container.get_children():
		label.label_settings.font_color = Color(0.5, 0.5, 0.5)
	screen_res_label.label_settings.font_color = Color(1, 1, 1)

func change_menu_selection(desired_selected : int) -> void:
	
	for label in label_container.get_children():
		label.label_settings.font_color = Color(0.5, 0.5, 0.5)
	for label in controls_label_container.get_children():
		if label is Label:
			label.label_settings.font_color = Color(0.5, 0.5, 0.5)
	for label in rebinding_label_container.get_children():
		label.label_settings.font_color = Color(0.5, 0.5, 0.5)
	
	selected_menu_option = desired_selected
	match selected_column:
		0:
			if selected_menu_option < 0:
				selected_menu_option = 5
			if selected_menu_option > 5:
				selected_menu_option = 0
			match selected_menu_option:
				0:
					screen_res_label.label_settings.font_color = Color(1, 1, 1)
				1:
					fullscreen_label.label_settings.font_color = Color(1, 1, 1)
				2:
					border_label.label_settings.font_color = Color(1, 1, 1)
				3:
					transparency_label.label_settings.font_color = Color(1, 1, 1)
				4:
					fps_label.label_settings.font_color = Color(1, 1, 1)
				5:
					vsync_label.label_settings.font_color = Color(1, 1, 1)
		1:
			if selected_menu_option < 0:
				selected_menu_option = 2
			if selected_menu_option > 2:
				selected_menu_option = 0
			match selected_menu_option:
				0:
					inner_deadzone_label.label_settings.font_color = Color(1, 1, 1)
				1:
					outer_deadzone_label.label_settings.font_color = Color(1, 1, 1)
				2:
					horizontal_axis_label.label_settings.font_color = Color(1, 1, 1)
		2:
			if selected_menu_option < 0:
				selected_menu_option = 12
			if selected_menu_option > 12:
				selected_menu_option = 0
			match selected_menu_option:
				0:
					joy_left_label.label_settings.font_color = Color(1, 1, 1)
				1:
					joy_right_label.label_settings.font_color = Color(1, 1, 1)
				2:
					joy_up_label.label_settings.font_color = Color(1, 1, 1)
				3:
					joy_down_label.label_settings.font_color = Color(1, 1, 1)
				4:
					c_up_label.label_settings.font_color = Color(1, 1, 1)
				5:
					c_down_label.label_settings.font_color = Color(1, 1, 1)
				6:
					c_left_label.label_settings.font_color = Color(1, 1, 1)
				7:
					c_right_label.label_settings.font_color = Color(1, 1, 1)
				8:
					a_label.label_settings.font_color = Color(1, 1, 1)
				9:
					b_label.label_settings.font_color = Color(1, 1, 1)
				10:
					z_label.label_settings.font_color = Color(1, 1, 1)
				11:
					cp_label.label_settings.font_color = Color(1, 1, 1)
				12:
					cpl_label.label_settings.font_color = Color(1, 1, 1)

func call_change_function(desired_button : int, dir : int) -> void:
	print(selected_column)
	match selected_column:
		0:
			match desired_button:
				0: # res
					picked_res += dir
					if picked_res >= resolutions.size():
						picked_res = 0
					if picked_res < 0:
						picked_res = resolutions.size() - 1
					get_window().size = resolutions[picked_res]
				1: # fs
					if get_window().mode != Window.MODE_EXCLUSIVE_FULLSCREEN:
						get_window().mode = Window.MODE_EXCLUSIVE_FULLSCREEN
					else:
						get_window().mode = Window.MODE_WINDOWED
				2: # border
					var old_res : Vector2 = get_window().size
					get_window().borderless = !get_window().borderless
					get_window().size = old_res
				3: # trans
					toggle_transparency()
				4: # fps
					Engine.max_fps = max(1, Engine.max_fps + dir)
				5: # vsync
					match DisplayServer.window_get_vsync_mode():
						DisplayServer.VSYNC_DISABLED:
							if dir == 1:
								DisplayServer.window_set_vsync_mode(DisplayServer.VSYNC_ENABLED)
							else:
								DisplayServer.window_set_vsync_mode(DisplayServer.VSYNC_MAILBOX)
						DisplayServer.VSYNC_ENABLED:
							if dir == 1:
								DisplayServer.window_set_vsync_mode(DisplayServer.VSYNC_ADAPTIVE)
							else:
								DisplayServer.window_set_vsync_mode(DisplayServer.VSYNC_DISABLED)
						DisplayServer.VSYNC_ADAPTIVE:
							if dir == 1:
								DisplayServer.window_set_vsync_mode(DisplayServer.VSYNC_MAILBOX)
							else:
								DisplayServer.window_set_vsync_mode(DisplayServer.VSYNC_ENABLED)
						DisplayServer.VSYNC_MAILBOX:
							if dir == 1:
								DisplayServer.window_set_vsync_mode(DisplayServer.VSYNC_DISABLED)
							else:
								DisplayServer.window_set_vsync_mode(DisplayServer.VSYNC_ADAPTIVE)
		1:
			match desired_button:
				0:
					SOGlobal.inner_deadzone = clamp(SOGlobal.inner_deadzone + (0.01 * dir), 0.0, SOGlobal.outer_deadzone)
				1:
					SOGlobal.outer_deadzone = clamp(SOGlobal.outer_deadzone + (0.01 * dir), SOGlobal.inner_deadzone, 1.0)
				2:
					SOGlobal.flip_x = !SOGlobal.flip_x
		2:
			print(\"ah\")
			match desired_button:
				0:
					currently_binding_action = \"mario_stick_left\"
				1:
					currently_binding_action = \"mario_stick_right\"
				2:
					currently_binding_action = \"mario_stick_up\"
				3:
					currently_binding_action = \"mario_stick_down\"
				4:
					currently_binding_action = \"cam_stick_left\"
				5:
					currently_binding_action = \"cam_stick_right\"
				6:
					currently_binding_action = \"cam_stick_up\"
				7:
					currently_binding_action = \"cam_stick_down\"
				8:
					currently_binding_action = \"mario_a\"
				9:
					currently_binding_action = \"mario_b\"
				10:
					currently_binding_action = \"mario_z\"
				11:
					currently_binding_action = \"dpad_up\"
				11:
					currently_binding_action = \"dpad_down\"
			currently_binding = true

var currently_binding : bool = false
var currently_binding_action : String = \"mario_a\"
@onready var binding_menu_label = $Control/binding_menu_box/VBoxContainer/binding_menu_label
@onready var binding_menu_box = $Control/binding_menu_box


func _unhandled_input(event:InputEvent):
	if !currently_binding:
		return
	if event.is_pressed():
		if event is InputEventKey:
			event.physical_keycode = event.keycode
			event.keycode = 0
			if event.pressed:
				match event.physical_keycode:
					KEY_ESCAPE:
						currently_binding = false
						return
					KEY_BACKSPACE:
						InputMap.action_erase_events(currently_binding_action)
						currently_binding = false
						return
		InputMap.action_add_event(currently_binding_action, event)
		currently_binding = false
		grace_frames = 15

func prettify_action_name(in_action : String) -> String:
	match in_action:
		\"mario_stick_left\":
			return \"Joystick Left\"
		\"mario_stick_right\":
			return \"Joystick Right\"
		\"mario_stick_up\":
			return \"Joystick Up\"
		\"mario_stick_down\":
			return \"Joystick Down\"
		\"cam_stick_left\":
			return \"C Left\"
		\"cam_stick_right\":
			return \"C Right\"
		\"cam_stick_up\":
			return \"C Up\"
		\"cam_stick_down\":
			return \"C Down\"
		\"mario_a\":
			return \"A Button\"
		\"mario_b\":
			return \"B Button\"
		\"mario_z\":
			return \"Z Button\"
		\"dpad_up\":
			return \"Place Checkpoint\"
		\"dpad_down\":
			return \"Return to Checkpoint\"
	return \"Unknown\"

@onready var control_settings_guide = $Control/control_settings_guide
@onready var action_rebind_guide = $Control/action_rebind_guide

var grace_frames := 0

func _process(delta):
	if !visible:
		return
	
	if currently_binding:
		grace_frames = 15
		binding_menu_box.visible = true
		var binding_name : String = prettify_action_name(currently_binding_action)
		binding_menu_label.text = \"Binding \" + binding_name + \"\\n\\nWaiting for input...\\n\\nESC to cancel, BACKSPACE to clear bindings\"
		return
	else:
		if Input.is_action_just_pressed(\"start_button\") and grace_frames == 0:
			close()
		binding_menu_box.visible = false
	
	grace_frames = maxf(0, grace_frames - 1)
	
	var inp = Input.get_vector(\"menu_left\", \"menu_right\", \"menu_up\", \"menu_down\", 0)
	
	var h_dir : int = 0
	var v_dir : int = 0
	
	if inp.x != 0:
		h_dir = sign(inp.x)
		if last_stick_value.x == 0:
			h_das_timer = Time.get_ticks_msec()
			call_change_function(selected_menu_option, h_dir)
		if Time.get_ticks_msec() > h_das_timer + das:
			if Time.get_ticks_msec() > h_last_das_trigger + arr:
				h_last_das_trigger = Time.get_ticks_msec()
				# we probably actually don't want to auto-repeat a settings change LOL
				#call_change_function(selected_menu_option, h_dir)
	if inp.y != 0:
		v_dir = sign(inp.y)
		if last_stick_value.y == 0:
			v_das_timer = Time.get_ticks_msec()
			change_menu_selection(selected_menu_option + v_dir)
		if Time.get_ticks_msec() > v_das_timer + das:
			if Time.get_ticks_msec() > v_last_das_trigger + arr:
				v_last_das_trigger = Time.get_ticks_msec()
				change_menu_selection(selected_menu_option + v_dir)
	
	
	last_stick_value = inp
	
	label_container.visible = false
	controls_label_container.visible = false
	rebinding_label_container.visible = false
	
	control_settings_guide.visible = false
	action_rebind_guide.visible = false
	# this is such a stupid way to do this and so is pretty much everything else in these menu UI scripts
	# but it works and it doesn't matter during gameplay so YAY
	match selected_column:
		0:
			control_settings_guide.visible = true
			action_rebind_guide.visible = true
			label_container.visible = true
			var viewport_res : Vector2 = get_viewport().size
			screen_res_label.text = \"Screen Resolution\\n\" + str(viewport_res.x) + \"x\" + str(viewport_res.y)
			
			var fs_string : String = \"Disabled\"
			if get_window().mode == Window.MODE_EXCLUSIVE_FULLSCREEN:
				fs_string  = \"Enabled\"
			fullscreen_label.text = \"Fullscreen\\n\" + fs_string
			
			var border_string : String = \"Disabled\"
			if get_window().borderless == true:
				border_string  = \"Enabled\"
			border_label.text = \"Borderless\\n\" + border_string
			
			var transparency_string : String = \"Disabled\"
			if get_window().transparent == true:
				transparency_string  = \"Enabled\"
			transparency_label.text = \"Transparent Background\\n\" + transparency_string
			
			fps_label.text = \"Max Framerate\\n\" + str(Engine.max_fps)
			
			var vsync_string : String = \"Disabled\"
			match DisplayServer.window_get_vsync_mode():
				DisplayServer.VSYNC_DISABLED:
					vsync_string = \"Disabled\"
				DisplayServer.VSYNC_ENABLED:
					vsync_string = \"Enabled\"
				DisplayServer.VSYNC_ADAPTIVE:
					vsync_string = \"Adaptive\"
				DisplayServer.VSYNC_MAILBOX:
					vsync_string = \"Mailbox\"
			vsync_label.text = \"Vsync\\n\" + vsync_string
			if Input.is_action_just_pressed(\"menu_pageleft\") and grace_frames == 0:
				selected_column = 2
				change_menu_selection(0)
			if Input.is_action_just_pressed(\"menu_pageright\") and grace_frames == 0:
				selected_column = 1
				change_menu_selection(0)
		1:
			controls_label_container.visible = true
			var pl_input := PlayerInput.from_input()
			raw_dot.position = Vector2(Input.get_axis(\"mario_stick_left\", \"mario_stick_right\"), Input.get_axis(\"mario_stick_up\", \"mario_stick_down\")) * 64 - Vector2(2, 2)
			adj_dot.position = Vector2(pl_input.JoyXAxis, pl_input.JoyYAxis) * 64 - Vector2(2, 2)
			rawcoord_x.text = \"x: \" + str(snappedf(Input.get_axis(\"mario_stick_left\", \"mario_stick_right\"), 0.001))
			rawcoord_y.text = \"y: \" + str(snappedf(Input.get_axis(\"mario_stick_up\", \"mario_stick_down\"), 0.001))
			adjcoord_x.text = \"x: \" + str(snappedf(pl_input.JoyXAxis, 0.001))
			adjcoord_y.text = \"y: \" + str(snappedf(pl_input.JoyYAxis, 0.001))
			inner_deadzone_label.text = \"Inner Deadzone\\n\" + str(snapped(SOGlobal.inner_deadzone, 0.01))
			outer_deadzone_label.text = \"Outer Deadzone\\n\" + str(snapped(SOGlobal.outer_deadzone, 0.01))
			var xflipstring : String = \"Enabled\"
			if !SOGlobal.flip_x:
				xflipstring = \"Disabled\"
			horizontal_axis_label.text = \"Camera Horizontal Axis Invert\\n\" + xflipstring
			if Input.is_action_just_pressed(\"menu_confirm\") and grace_frames == 0:
				selected_column = 0
				change_menu_selection(0)
			if Input.is_action_just_pressed(\"menu_back\") and grace_frames == 0:
				selected_column = 0
				change_menu_selection(0)
			if Input.is_action_just_pressed(\"menu_pageleft\") and grace_frames == 0:
				selected_column = 0
				change_menu_selection(0)
			if Input.is_action_just_pressed(\"menu_pageright\") and grace_frames == 0:
				selected_column = 2
				change_menu_selection(0)
		2:
			if Input.is_action_just_pressed(\"menu_confirm\") and grace_frames == 0:
				call_change_function(selected_menu_option, 1)
			if Input.is_action_just_pressed(\"menu_back\") and grace_frames == 0:
				selected_column = 0
				change_menu_selection(0)
			if Input.is_action_just_pressed(\"menu_pageleft\") and grace_frames == 0:
				selected_column = 1
				change_menu_selection(0)
			if Input.is_action_just_pressed(\"menu_pageright\") and grace_frames == 0:
				selected_column = 0
				change_menu_selection(0)
			rebinding_label_container.visible = true
			joy_left_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"mario_stick_left\"):
				joy_left_label.text += event.as_text() + \"\\n\"
				
			joy_right_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"mario_stick_right\"):
				joy_right_label.text += event.as_text() + \"\\n\"
				
			joy_up_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"mario_stick_up\"):
				joy_up_label.text += event.as_text() + \"\\n\"
				
			joy_down_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"mario_stick_down\"):
				joy_down_label.text += event.as_text() + \"\\n\"
				
			c_up_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"cam_stick_left\"):
				c_up_label.text += event.as_text() + \"\\n\"
				
			c_down_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"cam_stick_right\"):
				c_down_label.text += event.as_text() + \"\\n\"
				
			c_left_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"cam_stick_up\"):
				c_left_label.text += event.as_text() + \"\\n\"
				
			c_right_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"cam_stick_down\"):
				c_right_label.text += event.as_text() + \"\\n\"
				
			a_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"mario_a\"):
				a_label.text += event.as_text() + \"\\n\"
				
			b_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"mario_b\"):
				b_label.text += event.as_text() + \"\\n\"
				
			z_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"mario_z\"):
				z_label.text += event.as_text() + \"\\n\"
				
			cp_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"dpad_up\"):
				cp_label.text += event.as_text() + \"\\n\"
				
			cpl_label.text = \"\"
			for event:InputEvent in InputMap.action_get_events(\"dpad_down\"):
				cpl_label.text += event.as_text() + \"\\n\"
			if Input.is_action_just_pressed(\"menu_back\") and grace_frames == 0:
				selected_column = 0
				change_menu_selection(0)

func event_map_to_string(in_event : InputEvent) -> String:
	if in_event is InputEventJoypadButton:
		return \"Button \" + str(in_event.button_index)
	if in_event is InputEventJoypadMotion:
		return \"Axis \" + str(in_event.axis)
	return in_event.as_text()
"

[sub_resource type="LabelSettings" id="LabelSettings_hngwe"]
font = ExtResource("2_golva")
font_size = 24
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_iux1j"]
font = ExtResource("2_golva")
font_size = 24
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_vudne"]
font = ExtResource("2_golva")
font_size = 24
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_6pukl"]
font = ExtResource("2_golva")
font_size = 24
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_uqcvd"]
font = ExtResource("2_golva")
font_size = 24
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_qxady"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_trl4h"]
font = ExtResource("2_golva")
font_size = 24
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_ck521"]
font = ExtResource("2_golva")
font_size = 24
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_jo3q4"]
font = ExtResource("2_golva")
font_size = 24
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_v84ql"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_k8xut"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_x16cp"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_lhk5q"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_ops45"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_d2xf5"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_6k57l"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_qvqfv"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_mxx15"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_fkb42"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_pd85t"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_rauqk"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_0ythw"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_f7whm"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_bneqf"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_c5tat"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_djrm2"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_vxhvk"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_7yoce"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_y2amo"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_lcr7k"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_yvtx2"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_cg5b3"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_dp0fb"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_qcroj"]
font = ExtResource("2_golva")
font_size = 24

[sub_resource type="LabelSettings" id="LabelSettings_u0cq1"]
font = ExtResource("2_golva")
font_color = Color(0.2, 0.2, 0.2, 1)

[sub_resource type="LabelSettings" id="LabelSettings_3yeo7"]
font = ExtResource("2_golva")
font_size = 24
shadow_color = Color(0, 0, 0, 0.211765)
shadow_offset = Vector2(2, 2)

[sub_resource type="LabelSettings" id="LabelSettings_k6huw"]
font_size = 14

[sub_resource type="LabelSettings" id="LabelSettings_rin82"]
font = ExtResource("2_golva")
font_size = 24
shadow_size = 2
shadow_color = Color(0, 0, 0, 0.568627)
shadow_offset = Vector2(2, 2)

[sub_resource type="CompressedTexture2D" id="CompressedTexture2D_4vuvi"]
load_path = "res://.godot/imported/setting_guide.png-d0ff81c3b8fb263ff03426b5cb4ca443.ctex"

[node name="SettingsMenu" type="Control"]
layout_mode = 3
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
script = SubResource("GDScript_wgra1")

[node name="Control" type="Control" parent="."]
layout_mode = 1
anchor_right = 0.375
anchor_bottom = 1.0
offset_left = 240.0
offset_right = 560.0
offset_bottom = -120.0
grow_horizontal = 2
grow_vertical = 2

[node name="ColorRect" type="ColorRect" parent="Control"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0.470588)

[node name="LabelContainer" type="VBoxContainer" parent="Control"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 16

[node name="ScreenResLabel" type="Label" parent="Control/LabelContainer"]
layout_mode = 2
text = "Screen Resolution
320x240"
label_settings = SubResource("LabelSettings_hngwe")
horizontal_alignment = 1

[node name="FullscreenLabel" type="Label" parent="Control/LabelContainer"]
layout_mode = 2
text = "Fullscreen
Disabled"
label_settings = SubResource("LabelSettings_iux1j")
horizontal_alignment = 1

[node name="BorderLabel" type="Label" parent="Control/LabelContainer"]
layout_mode = 2
text = "Borderless
Disabled"
label_settings = SubResource("LabelSettings_vudne")
horizontal_alignment = 1

[node name="FPSLabel" type="Label" parent="Control/LabelContainer"]
layout_mode = 2
text = "Max Framerate
60"
label_settings = SubResource("LabelSettings_6pukl")
horizontal_alignment = 1

[node name="VsyncLabel" type="Label" parent="Control/LabelContainer"]
layout_mode = 2
text = "Vsync
Disabled"
label_settings = SubResource("LabelSettings_uqcvd")
horizontal_alignment = 1

[node name="ControlsLabelContainer" type="VBoxContainer" parent="Control"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2
theme_override_constants/separation = 16

[node name="ColorRect" type="ColorRect" parent="Control/ControlsLabelContainer"]
custom_minimum_size = Vector2(0, 128)
layout_mode = 2
color = Color(0, 0, 0, 1)

[node name="coord_disp_root" type="Control" parent="Control/ControlsLabelContainer/ColorRect"]
layout_mode = 1
anchor_left = 0.802
anchor_top = 0.5
anchor_right = 0.802
anchor_bottom = 0.5
offset_left = -0.15802
offset_right = -0.15802
grow_horizontal = 2
grow_vertical = 2

[node name="Line2D" type="Line2D" parent="Control/ControlsLabelContainer/ColorRect/coord_disp_root"]
points = PackedVector2Array(60, 0, 42.426, 42.426, 0, 60, -42.426, 42.426, -60, 0, -42.426, -42.426, 0, -60, 42.426, -42.426)
closed = true
width = 2.0
default_color = Color(0.52549, 0.52549, 0.52549, 1)
antialiased = true

[node name="Line2D2" type="Line2D" parent="Control/ControlsLabelContainer/ColorRect/coord_disp_root"]
points = PackedVector2Array(64, 64, 64, -64, -64, -64, -64, 64)
closed = true
width = 2.0
antialiased = true

[node name="raw_dot" type="TextureRect" parent="Control/ControlsLabelContainer/ColorRect/coord_disp_root"]
modulate = Color(0.643137, 0.172549, 0.141176, 1)
layout_mode = 0
offset_left = -2.0
offset_top = -2.0
offset_right = 2.0
offset_bottom = 2.0
pivot_offset = Vector2(2, 2)
texture = ExtResource("3_0r5oq")
expand_mode = 1

[node name="adj_dot" type="TextureRect" parent="Control/ControlsLabelContainer/ColorRect/coord_disp_root"]
layout_mode = 0
offset_left = -2.0
offset_top = -2.0
offset_right = 2.0
offset_bottom = 2.0
pivot_offset = Vector2(2, 2)
texture = ExtResource("3_0r5oq")
expand_mode = 1

[node name="rawcoord_label" type="Label" parent="Control/ControlsLabelContainer/ColorRect"]
layout_mode = 0
offset_left = 5.0
offset_right = 161.0
offset_bottom = 28.0
text = "Raw Coordinates"
label_settings = SubResource("LabelSettings_qxady")

[node name="rawcoord_x" type="Label" parent="Control/ControlsLabelContainer/ColorRect"]
layout_mode = 0
offset_left = 5.0
offset_top = 28.0
offset_right = 161.0
offset_bottom = 56.0
text = "x: 0.4399"
label_settings = SubResource("LabelSettings_qxady")

[node name="rawcoord_y" type="Label" parent="Control/ControlsLabelContainer/ColorRect"]
layout_mode = 0
offset_left = 158.0
offset_top = 28.0
offset_right = 314.0
offset_bottom = 56.0
text = "y: 0.4399"
label_settings = SubResource("LabelSettings_qxady")

[node name="adjcoord_x" type="Label" parent="Control/ControlsLabelContainer/ColorRect"]
layout_mode = 0
offset_left = 5.0
offset_top = 90.0
offset_right = 161.0
offset_bottom = 118.0
text = "x: 0.4399"
label_settings = SubResource("LabelSettings_qxady")

[node name="adjcoord_y" type="Label" parent="Control/ControlsLabelContainer/ColorRect"]
layout_mode = 0
offset_left = 158.0
offset_top = 90.0
offset_right = 314.0
offset_bottom = 118.0
text = "y: 0.4399"
label_settings = SubResource("LabelSettings_qxady")

[node name="adjcoord_label" type="Label" parent="Control/ControlsLabelContainer/ColorRect"]
layout_mode = 0
offset_left = 5.0
offset_top = 60.0
offset_right = 209.0
offset_bottom = 88.0
text = "Adjusted Coordinates"
label_settings = SubResource("LabelSettings_qxady")

[node name="InnerDeadzoneLabel" type="Label" parent="Control/ControlsLabelContainer"]
layout_mode = 2
text = "Inner Deadzone
0.05"
label_settings = SubResource("LabelSettings_trl4h")
horizontal_alignment = 1

[node name="OuterDeadzoneLabel" type="Label" parent="Control/ControlsLabelContainer"]
layout_mode = 2
text = "Outer Deadzone
0.05"
label_settings = SubResource("LabelSettings_ck521")
horizontal_alignment = 1

[node name="HorizontalAxisLabel" type="Label" parent="Control/ControlsLabelContainer"]
layout_mode = 2
text = "Camera Horizontal Axis Invert
Enabled"
label_settings = SubResource("LabelSettings_jo3q4")
horizontal_alignment = 1

[node name="ScrollContainer" type="ScrollContainer" parent="Control"]
visible = false
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="RebindingLabelContainer" type="VBoxContainer" parent="Control/ScrollContainer"]
layout_mode = 2
size_flags_horizontal = 3
size_flags_vertical = 3
theme_override_constants/separation = 8

[node name="JoyLeftLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Joystick Left"
label_settings = SubResource("LabelSettings_v84ql")
horizontal_alignment = 1

[node name="JoyLeftLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Axis 1"
label_settings = SubResource("LabelSettings_k8xut")
horizontal_alignment = 1

[node name="JoyRightLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Joystick Right"
label_settings = SubResource("LabelSettings_x16cp")
horizontal_alignment = 1

[node name="JoyRightLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Joystick Y Axis"
label_settings = SubResource("LabelSettings_lhk5q")
horizontal_alignment = 1

[node name="JoyUpLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Joystick Up"
label_settings = SubResource("LabelSettings_ops45")
horizontal_alignment = 1

[node name="JoyUpLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Axis 1"
label_settings = SubResource("LabelSettings_d2xf5")
horizontal_alignment = 1

[node name="JoyDownLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Joystick Down"
label_settings = SubResource("LabelSettings_6k57l")
horizontal_alignment = 1

[node name="JoyDownLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Axis 1"
label_settings = SubResource("LabelSettings_qvqfv")
horizontal_alignment = 1

[node name="CUpLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "C  Up"
label_settings = SubResource("LabelSettings_mxx15")
horizontal_alignment = 1

[node name="CUpLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "C  Up
Axis 1"
label_settings = SubResource("LabelSettings_fkb42")
horizontal_alignment = 1

[node name="CDownLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "C  Down"
label_settings = SubResource("LabelSettings_pd85t")
horizontal_alignment = 1

[node name="CDownLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "C  Down
Axis 1"
label_settings = SubResource("LabelSettings_rauqk")
horizontal_alignment = 1

[node name="CLeftLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "C  Left"
label_settings = SubResource("LabelSettings_0ythw")
horizontal_alignment = 1

[node name="CLeftLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "C  Left
Axis 1"
label_settings = SubResource("LabelSettings_f7whm")
horizontal_alignment = 1

[node name="CRightLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "C  Right"
label_settings = SubResource("LabelSettings_bneqf")
horizontal_alignment = 1

[node name="CRightLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "C  Right
Axis 1"
label_settings = SubResource("LabelSettings_c5tat")
horizontal_alignment = 1

[node name="ALabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "A  Button"
label_settings = SubResource("LabelSettings_djrm2")
horizontal_alignment = 1

[node name="ALabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "A  Button
Axis 1"
label_settings = SubResource("LabelSettings_vxhvk")
horizontal_alignment = 1

[node name="BLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "B  Button"
label_settings = SubResource("LabelSettings_7yoce")
horizontal_alignment = 1

[node name="BLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "B  Button
Axis 1"
label_settings = SubResource("LabelSettings_y2amo")
horizontal_alignment = 1

[node name="ZLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Z  Button"
label_settings = SubResource("LabelSettings_lcr7k")
horizontal_alignment = 1

[node name="ZLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Z  Button
Axis 1"
label_settings = SubResource("LabelSettings_yvtx2")
horizontal_alignment = 1

[node name="CPLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Place Checkpoint"
label_settings = SubResource("LabelSettings_cg5b3")
horizontal_alignment = 1

[node name="CPLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Place Checkpoint
Axis 1"
label_settings = SubResource("LabelSettings_dp0fb")
horizontal_alignment = 1

[node name="CPLLabel2" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Go To Checkpoint"
label_settings = SubResource("LabelSettings_qcroj")
horizontal_alignment = 1

[node name="CPLLabel" type="Label" parent="Control/ScrollContainer/RebindingLabelContainer"]
layout_mode = 2
text = "Go To Checkpoint
Axis 1"
label_settings = SubResource("LabelSettings_u0cq1")
horizontal_alignment = 1

[node name="control_settings_guide" type="Label" parent="Control"]
layout_mode = 1
anchors_preset = 6
anchor_left = 1.0
anchor_top = 0.5
anchor_right = 1.0
anchor_bottom = 0.5
offset_left = 29.9994
offset_top = -16.5
offset_right = 242.0
offset_bottom = 16.5
grow_horizontal = 0
grow_vertical = 2
text = "Control Settings   >"
label_settings = SubResource("LabelSettings_3yeo7")

[node name="action_rebind_guide" type="Label" parent="Control"]
layout_mode = 1
anchors_preset = 4
anchor_top = 0.5
anchor_bottom = 0.5
offset_left = -200.0
offset_top = -16.5
offset_right = 12.0002
offset_bottom = 16.5
grow_vertical = 2
text = "<  Action Bindings"
label_settings = SubResource("LabelSettings_3yeo7")

[node name="binding_menu_box" type="ColorRect" parent="Control"]
visible = false
layout_mode = 1
anchors_preset = 8
anchor_left = 0.5
anchor_top = 0.5
anchor_right = 0.5
anchor_bottom = 0.5
offset_left = -160.0
offset_top = -60.0
offset_right = 160.0
offset_bottom = 60.0
grow_horizontal = 2
grow_vertical = 2
color = Color(0, 0, 0, 0.435294)

[node name="VBoxContainer" type="VBoxContainer" parent="Control/binding_menu_box"]
layout_mode = 1
anchors_preset = 15
anchor_right = 1.0
anchor_bottom = 1.0
grow_horizontal = 2
grow_vertical = 2

[node name="binding_menu_label" type="Label" parent="Control/binding_menu_box/VBoxContainer"]
layout_mode = 2
text = "Binding Left Stick

Waiting for input...

ESC to cancel, BACKSPACE to clear bindings"
label_settings = SubResource("LabelSettings_k6huw")
horizontal_alignment = 1

[node name="WarningLabel" type="Label" parent="Control"]
layout_mode = 1
anchors_preset = 7
anchor_left = 0.5
anchor_top = 1.0
anchor_right = 0.5
anchor_bottom = 1.0
offset_left = -16.0
offset_top = -127.0
offset_right = 398.0
offset_bottom = 118.0
grow_horizontal = 2
grow_vertical = 0
text = "



* Controller input is disabled in this menu.
Please use your keyboard to adjust settings.
Some menus may require you to use your mouse
to scroll the menu up and down."
label_settings = SubResource("LabelSettings_rin82")
horizontal_alignment = 1

[node name="TextureRect" type="TextureRect" parent="Control"]
layout_mode = 0
offset_left = 806.0
offset_top = 554.0
offset_right = 1170.0
offset_bottom = 714.0
texture = SubResource("CompressedTexture2D_4vuvi")
expand_mode = 3
stretch_mode = 4
